doctype 5

html
  head
    title SessionSockets usage example
    //script(type='text/javascript', src='/socket.io/socket.io.js')
    script(type='text/javascript', src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js')

    style(type='text/css')
      body {
        padding: 30px 50px;
      }

      #t {
        display: block;
        margin-bottom: 15px;
        outline: none;
        width: 700px;
        height: 100px;
      }

      #foo {
        width: 200px;
      }

  body

    input(type='text', id='subscribe')
    button(class='sub')

    h1 SessionSockets usage example
    p='You should see below your session hash with "bar" as initial value for the "foo" key'

    textarea#t(readonly='1')
    input#foo(placeholder='now type in a new value for foo')
    span=' then you should see foo value updated'

    script(type='text/javascript')

      $('button.sub').on('click', function(){
          console.log('posting');
           $.ajax({
            type: "POST",
            url: '/',
            data: $(this).val(),
            success : function(data, textStatus, jqXHR){
              alert('test success');
              console.log(data);
            },
            complete : function() {
              console.log('request complete');
            },
            error : function( jqXHR, textStatus, errorThrown) {
              console.log('error : ' + textStatus);
              console.log(errorThrown);
            },
            dataType: 'text'
          });   
        });

